{"generator":"Code Snippets v2.14.1","date_created":"2021-03-20 12:47","snippets":[{"name":"Slider Lazyloading for Oxygen","desc":"This script adds Lazy Loading to the Slider Elements in the Oxygen Builder.\n\nAuthor: <a href=\"https:\/\/mirkoschubert.de\">Mirko Schubert<\/a>\nVersion: 1.0","tags":["javascript","unslider","oxygen"],"scope":"front-end","code":"\/*\n(Un-)Slider Lazyloading Workaround for Oxygen\nAuthor: Mirko Schubert <office@mirkoschubert.de>\nVersion: 1.0\nLicense: MIT\n\nThis script adds Lazy Loading to the Slider Elements in the Oxygen Builder.\n\nGet started:\n1. Set up one or multiple Slider Elements in the Oxygen Builder\n2. Set a background image for each slide and style it appropriately\n3. Add a class with the name \"hidden\" for each slide but the first one!\n4. Add custom CSS to the \"hidden\" class with the following code: background: none !important;\n5. Activate this script. That's it!\n\nNotes:\n- For now this script only works for sliders with background images (which is better for responsive design anyway).\n- It uses JavaScript APIs from the Browser, which are widely available. Except for IE.\n\nHave fun & happy coding!\n*\/\n\nadd_action( 'wp_footer', function () { ?>\n<script>\n\tjQuery(document).ready(function($) {\n\t\tvar sliders = document.querySelectorAll('.ct-slider')\n\t\tsliders.forEach(slider => {\n\t\t\tvar slides = slider.getElementsByClassName('ct-slide')\n\t\t\tvar effect = slider.getElementsByClassName('oxygen-unslider-container')[0].classList.contains('unslider-fade') ? 'fade' : 'slide'\n\t\t\tif (effect === 'slide') {\n\t\t\t\tif ('IntersectionObserver' in window) {\n\t\t\t\t\tvar io = new IntersectionObserver((entries, observer) => {\n\t\t\t\t\t\tentries.forEach(entry => {\n\t\t\t\t\t\t\tvar slide = entry.target\n\t\t\t\t\t\t\tif (entry.intersectionRatio > 0) {\n\t\t\t\t\t\t\t\tslide.classList.remove('hidden')\n\t\t\t\t\t\t\t\tio.unobserve(slide)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t}, {\n\t\t\t\t\t\troot: null,\n\t\t\t\t\t\trootMargin: '-5px',\n\t\t\t\t\t\ttheshold: 1.0\n\t\t\t\t\t})\n\t\t\t\t\tfor (i=0;i<slides.length;i++) {\n\t\t\t\t\t\tio.observe(slides[i])\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tconsole.error('No IntersectionObserver API found.');\n\t\t\t\t}\n\t\t\t} else if (effect === 'fade') {\n\t\t\t\tif ('MutationObserver' in window) {\n\t\t\t\t\tvar hidden = []\n\t\t\t\t\tvar mo = new MutationObserver(mutations => {\n\t\t\t\t\t\tfor (i=0;i<mutations.length;i++) {\n\t\t\t\t\t\t\thidden[i] = mutations[i].target.firstChild.classList.contains('hidden')\n\t\t\t\t\t\t\tvar active = mutations[i].target.classList.contains('unslider-active')\n\t\t\t\t\t\t\tif (hidden[i] && active) {\n\t\t\t\t\t\t\t\tmutations[i].target.firstChild.classList.remove('hidden')\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (hidden.indexOf(true) === -1) {\n\t\t\t\t\t\t\tmo.disconnect()\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\tfor (i=0;i<slides.length;i++) {\n\t\t\t\t\t\tif (slides[i].classList.contains('hidden')) {\n\t\t\t\t\t\t\tmo.observe(slides[i].parentNode, { attributes: true })\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tconsole.error('No MutationObserver API found.')\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t});\n<\/script>\n<?php } );\n","priority":"10"}]}